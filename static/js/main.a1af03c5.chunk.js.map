{"version":3,"sources":["MenuItem.js","cancelEvent.js","SelectedItem.js","Filter.js","OptionStates.js","StatefulOptionsSelector.js","index.js"],"names":["MenuItem","className","this","props","option","icon","src","alt","width","height","render","label","Component","cancelEvent","e","preventDefault","stopPropagation","selectedOptionStateClassName","_","camelCase","state","value","SelectedItem","handleChange","bind","handleOptionStateChange","stateless","disabled","join","onMouseDown","onClick","title","Filter","text","search","toLowerCase","indexOf","OptionStates","states","map","state2index","reduce","index","has","RangeError","length","values","push","limitSignOption","groupId","selectable","isLimitSignOption","StatefulOptionsSelector","selectedOptions","init","self","data","groups","optionStates","group","count","newGroup","clone","options","id","concat","apply","first","groupId2Style","style","groupId2Filter","filter","groupId2Count","nextProps","setState","value2options","propagateValue","value2option","optionStateValue","optionValue","find","order","multiSelectInstance","blur","prevState","selectedOption","next","result","emptyValue","emptyStateValue","stateValue","ref","input","onValuesChange","closeOnSelect","filterOptions","isEmpty","groupId2options","groupBy","each","groupOptions","chain","slice","flatten","limitOptions","reject","renderOption","generalOptionClassName","specificOptionClassName","renderValue","placeholder","renderNoResultsFound","noResultsFound","onKeyboardSelectionFailed","console","log","optionalProps","open","hideResetButton","renderResetButton","renderToggleButton","groups1","ReactDOM","$","html","JSON","stringify","undefined","document","getElementById","groups2","tags","and","not"],"mappings":"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","file":"static/js/main.a1af03c5.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nclass MenuItem extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<div className='flex-container'>\n\t\t\t\t{this.props.option.icon && \n\t\t\t\t <div className='menuitem-icon'><img src={this.props.option.icon} alt='#' width='16' height='16'/></div>} \n\t\t\t\t<div className='menuitem-label'>{this.props.option.render ? this.props.option.render() : this.props.option.label}</div>\n\t\t\t</div>);\n\t}\n}\n\nexport default MenuItem;","export default function cancelEvent(e) {\n\te.preventDefault();\n\te.stopPropagation();\n}","import React, { Component } from 'react';\nimport _ from 'lodash';\nimport MenuItem from './MenuItem';\nimport cancelEvent from './cancelEvent';\n\nclass SelectedItem extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\thandleChange(e) {\n\t\tcancelEvent(e);\n\t\tthis.props.handleOptionStateChange(this.props.option);\n\t}\n\n\trender() {\n\t\tconst stateless = (this.props.option.state.value === 'selected');\n\t\treturn (<div disabled={stateless}\n\t\t\t\tclassName={['item', stateless ? 'stateless' : 'stateful', 'selected'].join(' ')}\n\t\t\t\tonMouseDown={cancelEvent}\n\t\t\t\tonClick={this.handleChange}\n\t\t\t\ttitle={this.props.option.state.label}>\n\n\t\t\t\t\t<MenuItem option={this.props.option} />\n\n\t\t\t\t</div>);\n\t}\n}\n\nexport function selectedOptionStateClassName(option) {\n\treturn _.camelCase(`${option.state.value}`);\n}\n\nexport default SelectedItem;\n","const Filter = {\n\t'full-text-search': textFilter,\n\t'none': allFilter\n}\n\nfunction textFilter(text, search) {\n\treturn text.toLowerCase().indexOf(search.toLowerCase()) > -1;\n}\n\nfunction allFilter(text, search) {\n\treturn true;\n}\n\nexport default Filter;","import _ from 'underscore';\n\nclass OptionStates {\n\t\n\tconstructor(states) {\n\t\tthis.states = states ? \n\t\t\tstates.map((state) => \n\t\t\t\t({ \n\t\t\t\t\tvalue: state.value, \n\t\t\t\t\tlabel: state.label ? state.label : state.value\n\t\t\t\t})) : \n\t\t\t[{ value: 'selected', label: 'selected' }];\n\t\t\n\t\tthis.state2index = this.states.reduce((map, state, index) => { \n\t\t\tmap[state.value] = index; \n\t\t\treturn map; \n\t\t}, {});\n\t}\n\t\n\tfirst() {\n\t\treturn this.states[0];\n\t}\n\t\n\tnext(state) {\n\t\tif (!_.has(this.state2index, state.value)) {\n\t\t\tthrow new RangeError('Unknown state: ' + state.value);\n\t\t}\n\t\tconst index = (this.state2index[state.value] + 1) % this.states.length;\n\t\treturn this.states[index];\n\t}\n\t\n\tstate(value) {\n\t\tif (!_.has(this.state2index, value)) {\n\t\t\tthrow new RangeError('Unknown state: ' + value);\n\t\t}\n\t\treturn this.states[this.state2index[value]];\n\t}\n\t\n\tvalues() {\n\t\treturn this.states.reduce((values, state) => {\n\t\t\tvalues.push(state.value);\n\t\t\treturn values;\n\t\t}, []);\n\t}\n}\n\nexport default OptionStates;","import React, { Component } from 'react';\nimport { MultiSelect } from 'react-selectize';\nimport _ from 'underscore';\nimport MenuItem from './MenuItem';\nimport SelectedItem, { selectedOptionStateClassName } from './SelectedItem';\nimport Filter from './Filter';\nimport OptionStates from './OptionStates';\nimport cancelEvent from './cancelEvent';\n\nclass StatefulOptionsSelector extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleOptionStateChange = this.handleOptionStateChange.bind(this);\n\t\tthis.state = {selectedOptions: []};\n\t\tthis.init(props);\n\t}\n\n\tinit(props) {\n\n\t\tconst self = this;\n\n\t\tlet data = props.groups ? props.groups : [];\n\n\t\tthis.optionStates = new OptionStates(props.states);\n\n\t\tdata = data.map(function(group) {\n\t\t\tif (group.count) {\n\t\t\t\tlet newGroup = _.clone(group);\n\t\t\t\tnewGroup.options = _.clone(group.options);\n\t\t\t\tnewGroup.options.push(limitSignOption(group.id));\n\t\t\t\treturn newGroup;\n\t\t\t}\n\t\t\treturn group;\n\t\t});\n\n\t\tthis.groups = data.map(function(group) {\n\t\t\treturn {\n\t\t\t\tgroupId: group.id,\n\t\t\t\ttitle: group.title\n\t\t\t}\n\t\t});\n\n\t\tthis.options = [].concat.apply([], data.map(function(group) {\n\t\t\treturn group.options.map(function(option) {\n\t\t\t\treturn {\n\t\t\t\t\tgroupId: group.id,\n\t\t\t\t\trender: option.render,\n\t\t\t\t\tlabel: option.label ? option.label : option.value,\n\t\t\t\t\tvalue: option.value,\n\t\t\t\t\ticon: option.icon,\n\t\t\t\t\tselectable: option.selectable,\n\t\t\t\t\tstate: self.optionStates.first()\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis.groupId2Style = data.reduce(function(map, group) {\n\t\t\tmap[group.id] = group.style ? group.style : 'source';\n\t\t\treturn map;\n\t\t}, {});\n\n\t\tthis.groupId2Filter = data.reduce(function(map, group) {\n\t\t\tmap[group.id] = group.filter && Filter[group.filter] ? Filter[group.filter] : Filter['full-text-search'];\n\t\t\treturn map;\n\t\t}, {});\n\n\t\tthis.groupId2Count = data.reduce(function(map, group) {\n\t\t\tif (group.count) {\n\t\t\t\tmap[group.id] = group.count;\n\t\t\t}\n\t\t\treturn map;\n\t\t}, {});\n\t}\n\n\tUNSAFE_componentWillReceiveProps(nextProps) {\n\t\tthis.init(nextProps);\n\t\tthis.setState({\n\t\t\tselectedOptions: this.value2options(nextProps.value)\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState({\n\t\t\tselectedOptions: this.value2options(this.props.value)\n\t\t}, () => {\n\t\t\tthis.propagateValue();\n\t\t});\n\t}\n\n\tvalue2options(value) {\n\t\tif (!value) {\n\t\t\treturn [];\n\t\t}\n\t\tlet options = [];\n\t\tlet value2option = {};\n\t\tfor (let groupId in value.value) {\n\t\t\tfor (let optionStateValue in value.value[groupId]) {\n\t\t\t\tfor (let optionValue of value.value[groupId][optionStateValue]) {\n\t\t\t\t\tlet option = this.options.find(function(option) {\n\t\t\t\t\t\treturn option.value === optionValue && option.groupId === groupId;\n\t\t\t\t\t});\n\t\t\t\t\toption = _.clone(option);\n\t\t\t\t\toption.state = this.optionStates.state(optionStateValue);\n\t\t\t\t\tvalue2option[option.value] = option;\n\t\t\t\t\toptions.push(option);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value.order && value.order.length ?\n\t\t\tvalue.order.map(optionValue => (value2option[optionValue])) :\n\t\t\toptions;\n\t}\n\n\thandleOptionStateChange(option) {\n\t\tconst self = this;\n\t\tthis.multiSelectInstance.blur();\n\t\tthis.setState((prevState, props) => {\n\t\t\tlet selectedOptions = prevState.selectedOptions.map(function(selectedOption) {\n\t\t\t\tif (selectedOption.value === option.value) {\n\t\t\t\t\tselectedOption.state = self.optionStates.next(option.state);\n\t\t\t\t}\n\t\t\t\treturn selectedOption;\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tselectedOptions: selectedOptions\n\t\t\t};\n\t\t}, () => {\n\t\t\tthis.propagateValue();\n\t\t});\n\t}\n\n\tpropagateValue() {\n\t\tif (this.props.handleChange) {\n\t\t\tthis.props.handleChange(this.result());\n\t\t}\n\t}\n\n\tresult() {\n\t\treturn this.state.selectedOptions.reduce(function(map, selectedOption) {\n\t\t\tmap.value[selectedOption.groupId][selectedOption.state.value].push(selectedOption.value);\n\t\t\tmap.order.push(selectedOption.value);\n\t\t\treturn map;\n\t\t}, this.emptyValue());\n\t}\n\n\temptyValue() {\n\t\treturn this.groups.reduce((map, group) => {\n\t\t\tmap.value[group.groupId] = this.emptyStateValue();\n\t\t\treturn map;\n\t\t}, { value: {}, order: [] });\n\t}\n\n\temptyStateValue() {\n\t\treturn this.optionStates.values().reduce((map, stateValue) => {\n\t\t\tmap[stateValue] = [];\n\t\t\treturn map;\n\t\t}, {})\n\t}\n\n\trender() {\n\t\tconst self = this;\n\n\t\treturn (<MultiSelect\n\t\t\tref={(input) => { this.multiSelectInstance = input; }}\n\n\t\t\tclassName='multiselect'\n\n\t\t\tgroups={this.groups}\n\n\t\t\toptions={this.options}\n\n\t\t\tvalues={this.state.selectedOptions}\n\n\t\t\tonValuesChange={function(selectedOptions) {\n\n\t\t\t\tself.setState({\n\t\t\t\t\tselectedOptions: selectedOptions\n\t\t\t\t}, () => {\n\t\t\t\t\tself.propagateValue();\n\t\t\t\t});\n\t\t\t}}\n\n\t\t\tcloseOnSelect={false}\n\n\t\t\t// filterOptions :: [Item] -> [Item] -> String -> [Item]\n\t\t\tfilterOptions={function(options, values, search) {\n\t\t\t\tlet filteredOptions = _.chain(options)\n\t\t\t\t\t.reject(function(option){\n\t\t\t\t\t\t\treturn self.state.selectedOptions.map(function(selectedOption){\n\t\t\t\t\t\t\t\treturn selectedOption.value\n\t\t\t\t\t\t\t}).indexOf(option.value) > -1 ||\n\t\t\t\t\t\t\t\tisLimitSignOption(option);\n\t\t\t\t\t\t})\n\t\t\t\t\t.filter(function(option) {\n\t\t\t\t\t\treturn self.groupId2Filter[option.groupId](option.label, search);\n\t\t\t\t\t})\n\t\t\t\t\t.value();\n\t\t\t\treturn limitOptions(filteredOptions, self.groupId2Count);\n\t\t\t}}\n\n\n\t\t\trenderOption={function(option){\n\t\t\t\tconst generalOptionClassName = isLimitSignOption(option) ? 'limit-sign' : 'selectable';\n\t\t\t\tconst specificOptionClassName = self.groupId2Style[option.groupId];\n\t\t\t\treturn (<div className='menu-option' >\n\t\t\t\t\t\t<div className={[generalOptionClassName, specificOptionClassName].join(' ')}>\n\t\t\t\t\t\t<MenuItem option={option} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>);\n\t\t\t}}\n\n\t\t\trenderValue={function(option){\n\t\t\t\tconst specificOptionClassName = self.groupId2Style[option.groupId];\n\t\t\t\treturn (<div className='selected-option'>\n\t\t\t\t\t<div className={[specificOptionClassName, selectedOptionStateClassName(option), 'flex-container'].join(' ')}>\n\t\t\t\t\t<SelectedItem option={option} handleOptionStateChange={self.handleOptionStateChange} />\n\t\t\t\t\t<div className='x'\n\t\t\t\t\t\t onClick={function(e) {\n\t\t\t\t\t\t\tself.multiSelectInstance.blur();\n\n\t\t\t\t\t\t\tself.setState((prevState, props) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tselectedOptions: _.reject(self.state.selectedOptions,\n\t\t\t\t\t\t\t\t\t\tfunction(selectedOption) {\n\t\t\t\t\t\t\t\t\t\t\treturn option.value === selectedOption.value;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tself.propagateValue();\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t }}\n\t\t\t\t\t\t onMouseDown={cancelEvent} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>);\n\t\t\t}}\n\n\t\t\tplaceholder={ this.props.placeholder || this.props.placeholder === '' ? this.props.placeholder : \"Select options\" }\n\n\t\t\trenderNoResultsFound={function() {\n\t\t\t\treturn (<div className='no-results-found'>{self.props.noResultsFound ? self.props.noResultsFound : 'No results found'}</div>);\n\t\t\t}}\n\n\t\t\tonKeyboardSelectionFailed={function(e) {\n\t\t\t\tif (e.preventDefault && e.stopPropagation) {\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('IMPORTANT: to prevent TIME combo changes,\\n' +\n\t\t\t\t\t\t'modify react-selectize/src/ReactSelectize.js: onKeyboardSelectionFailed(e.which); -> onKeyboardSelectionFailed(e);')\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\t{...this.optionalProps()}\n\n\t\t/>);\n\n\t}\n\n\toptionalProps() {\n\t\tlet optionalProps = {};\n\t\tif (this.props.open) {\n\t\t\toptionalProps.open = this.props.open;\n\t\t}\n\t\tif (this.props.hideResetButton) {\n\t\t\toptionalProps.hideResetButton = this.props.hideResetButton;\n\t\t}\n\t\tif (this.props.renderResetButton) {\n\t\t\toptionalProps.renderResetButton = this.props.renderResetButton;\n\t\t}\n\t\tif (this.props.renderToggleButton) {\n\t\t\toptionalProps.renderToggleButton = this.props.renderToggleButton;\n\t\t}\n\t\treturn optionalProps;\n\t}\n\n}\n\nexport function limitOptions(options, groupId2Count) {\n\tif (groupId2Count && !_.isEmpty(groupId2Count)) {\n\t\tlet groupId2options = _.groupBy(options, 'groupId');\n\t\t_.each(groupId2options, (groupOptions, groupId) => {\n\t\t\tconst count = groupId2Count[groupId];\n\t\t\tif (count && groupId2options[groupId].length > count) {\n\t\t\t\tgroupId2options[groupId] = _.chain(groupId2options[groupId])\n\t\t\t\t\t\t\t\t\t.slice(0, count)\n\t\t\t\t\t\t\t\t\t.push(limitSignOption(groupId))\n\t\t\t\t\t\t\t\t\t.value();\n\t\t\t}\n\t\t});\n\t\toptions = _.flatten(_.values(groupId2options));\n\t}\n\n\treturn options;\n}\n\nfunction limitSignOption(groupId) {\n\treturn {value: '...', label: '...', groupId: groupId, selectable: false};\n}\n\nfunction isLimitSignOption(option) {\n\treturn option.value === '...';\n}\n\nexport default StatefulOptionsSelector;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './selector.css'\nimport './states.css'\nimport '../node_modules/react-selectize/themes/default.css';\nimport $ from 'jquery';\n\n\nimport StatefulOptionsSelector from './StatefulOptionsSelector';\n\nconst states = [\n\t{\n\t\tvalue: 'or',\n\t\tlabel: 'OR'\n\t},\n\t{\n\t\tvalue: 'and',\n\t\tlabel: 'AND'\n\t},\n\t{\n\t\tvalue: 'not',\n\t\tlabel: 'NOT'\n\t}\n];\n\nconst groups1 = [\n\t{\n\t\tid: 'sources',\n\t\ttitle: 'SOURCES',\n\t\tcount: 3,\n\n\t\toptions: [\n\t\t\t{\n\t\t\t\trender: () => (<div className=\"custom-label\">AERONET</div>),\n\t\t\t\tvalue: 'Aeronet.cz'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Parlamentni Listy',\n\t\t\t\tvalue: 'ParlamentniListy.cz'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'Novinky.cz'\n\t\t\t},\n\t\t\t{\n\t\t\t\trender: () => (<div className=\"custom-label\">BLESK ***</div>),\n\t\t\t\tlabel: 'blesk *** xxx',\n\t\t\t\tvalue: 'Blesk.cz'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'Lidovky.cz'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'Ihned.cz'\n\t\t\t},\n\t\t]\n\n\t},\n\n\t{\n\t\tid: 'tags',\n\t\ttitle: 'TAGS',\n\t\tstyle: 'source',\n\t\tfilter: 'none',\n\n\t\toptions: [\n\t\t\t{\n\t\t\t\trender: () => (<div className=\"custom-label\">CzechNews</div>),\n\t\t\t\tvalue: 'CzechNews',\n\t\t\t\ticon: 'img/blue.png'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'Troll',\n\t\t\t\ticon: 'img/red.png'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'Propaganda',\n\t\t\t\ticon: 'img/green.png'\n\t\t\t}\n\t\t]\n\n\t}\n];\n\n\nfunction handleChange1(value) {\n\t$('#value1').html(JSON.stringify(value, undefined, 4));\n}\n\nReactDOM.render(\n\t<StatefulOptionsSelector\n\t\tgroups={groups1}\n\t\tstates={states}\n\t\thandleChange={handleChange1}\n\t\tplaceholder=''\n\t/>,\n\tdocument.getElementById('root1')\n);\n\nconst groups2 = [\n\t{\n\t\tid: 'tags',\n\t\tstyle: 'tag',\n\n\t\toptions: [\n\t\t\t{\n\t\t\t\trender: () => (<div className=\"custom-label\">RED</div>),\n\t\t\t\tlabel: 'Red',\n\t\t\t\tvalue: 'red',\n\t\t\t\ticon: 'img/red.png'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Green',\n\t\t\t\tvalue: 'green',\n\t\t\t\ticon: 'img/green.png'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Blue',\n\t\t\t\tvalue: 'blue',\n\t\t\t\ticon: 'img/blue.png'\n\t\t\t}\n\t\t]\n\n\t}\n];\n\nconst value2 = { \n\tvalue: { tags: { and: [ 'red' ], not: [ 'blue' ] } },\n\torder: [ 'blue', 'red' ]\n};\n\n\nfunction handleChange2(value) {\n\t$('#value2').html(JSON.stringify(value, undefined, 4));\n}\n\nReactDOM.render(\n\t<StatefulOptionsSelector\n\t\tgroups={groups2}\n\t\tstates={states}\n\t\thandleChange={handleChange2}\n\t\tvalue={value2}\n\t\tplaceholder='Select color tags'\n\t\tnoResultsFound='NO RESULTS!'\n\t\topen={true}\n\t/>,\n\tdocument.getElementById('root2')\n);\n"],"sourceRoot":""}